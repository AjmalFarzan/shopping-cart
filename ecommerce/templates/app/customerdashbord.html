{% extends 'app/base.html' %}
{% load static %}
{% block title %}Login{% endblock title %}
{% block main-content %}


<body>
    <style>
        #content {
        margin-top: 20px;
        padding: 20px;
        border: 1px solid #ddd;
        border-radius: 5px;
        background-color: #f9f9f9;
    }
    .order-item img {
        height: 30%;
        width: 30%;
    }
    </style>
    <nav class="navbar navbar-expand-lg navbar-dark bg-info">
        <a class="navbar-brand" href="#">Customer Dashboard</a>
    </nav>
    
    <div class="container mt-4">
        <div class="row">
            <div class="col-md-12">
                <!-- Sidebar -->
                <ul class="list-group">
                    <li class="list-group-item"><a href="#">Home</a></li>
                    <li class="list-group-item"><a href="#">Account</a></li>
                    <li class="list-group-item" id="orders-link"><a href="{% url 'app:orders' %}">Orders</a></li>
                    <li class="list-group-item"><a href="#">Analytics</a></li>
                </ul>
            </div>
        </div>
    </div>


    <!-- <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script>
      jQuery(document).ready(function () {
          $("#orders-link").on('click', function (e) {
            e.preventDefault()
              // Send an AJAX request to retrieve order data
              $.ajax({
                  url: '/dashbord/fetch_orders/',
                  dataType: 'json',
                  success: function (data) {
                      // Clear the content area
                      console.log(data)
                      let content = $("#content");
                      content.empty();
  
                      // Parse the JSON response
                      let orders = JSON.parse(data.order);
  
                      // Loop through the orders and display them
                      for (let i = 0; i < orders.length; i++) {
                          let order = orders[i].fields;
                          let orderStatus = order.order.paid_status;
                          let orderItem = `
                              <div class="order-item">
                                <a> <img src="${order.image}" alt="${order.item}"></a>
                                  <p>Item: ${order.item}</p>
                                  <p>Quantity: ${order.qty}</p>
                                  <p>Price: ${order.price}</p>
                                  <p>Total: ${order.total}</p>
                                  <p>Status: ${orderStatus}</p>
                              </div>
                          `;
                          content.append(orderItem);
                      }
                  }
              });
          });
      });
  </script>
  
        
         -->

</body>
{% endblock %}
